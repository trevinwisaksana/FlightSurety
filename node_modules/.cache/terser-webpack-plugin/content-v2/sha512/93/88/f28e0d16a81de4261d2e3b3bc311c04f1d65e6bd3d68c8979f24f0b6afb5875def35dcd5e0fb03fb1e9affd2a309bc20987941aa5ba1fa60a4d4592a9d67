{"code":"exports.id=0,exports.modules={\"./src/server/server.js\":function(e,t,s){\"use strict\";s.r(t);var o=s(\"./build/contracts/FlightSuretyApp.json\"),n=s(\"./build/contracts/FlightSuretyData.json\"),r=s(\"./src/server/config.json\"),c=s(\"web3\"),a=s.n(c),i=s(\"express\"),l=s.n(i),d=r.localhost,u=new a.a(new a.a.providers.WebsocketProvider(d.url.replace(\"http\",\"ws\")));u.eth.defaultAccount=u.eth.accounts[0];var f=new u.eth.Contract(o.abi,d.appAddress),h=(new u.eth.Contract(n.abi,d.dataAddress),[]),g=[0,10,20,30,40,50];u.eth.getAccounts().then((function(e){for(var t=function(t){f.methods.registerOracle().send({from:e[t],value:u.utils.toWei(\"1\",\"ether\"),gas:3e6}).catch((function(e){return console.log(\"Failed to register oracle: \".concat(e))})).then((function(s){f.methods.getMyIndexes().call({from:e[t]}).then((function(s){console.log(\"Indexes: \",s);var o={address:e[t],indexes:s};h.push(o)})),console.log(\"Successfully registered oracle: \",e[t])}))},s=0;s<20;s++)t(s)})),f.events.OracleRequest({fromBlock:0},(function(e,t){e&&console.log(e),console.log(\"Response submitted: \",JSON.stringify(t)),h.forEach((function(e){if(e.indexes.includes(t.index)){var s=g[Math.floor(Math.random()*g.length)];console.log(\"Random status code: \",s),f.methods.submitOracleResponse(t.index,t.airline,t.flight,t.timestamp,s).send({from:e.address,gas:3e6})}}))}));var p=l()();p.get(\"/api\",(function(e,t){t.send({message:\"An API for use with your Dapp!\"})})),t.default=p}};","extractedComments":[]}
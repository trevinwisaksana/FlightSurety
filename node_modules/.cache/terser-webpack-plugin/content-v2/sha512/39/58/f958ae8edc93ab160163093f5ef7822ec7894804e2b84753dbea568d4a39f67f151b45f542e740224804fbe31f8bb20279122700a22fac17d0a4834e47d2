{"code":"exports.id=0,exports.modules={\"./node_modules/keccak256/dist/index.js\":function(e,t,r){\"use strict\";var n=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e},o=r(\"keccak\"),s=r(\"bn.js\");function i(e){return e=function(e){if(!Buffer.isBuffer(e))if(Array.isArray(e))e=Buffer.from(e);else if(\"string\"==typeof e)e=function(e,t){if(\"string\"!=typeof e||!e.match(/^0x[0-9A-Fa-f]*$/))return!1;if(t&&e.length!==2+2*t)return!1;return!0}(e)?Buffer.from(c(function(e){if(\"string\"!=typeof e)return e;return function(e){if(\"string\"!=typeof e)throw new Error(\"value must be type 'string', is currently type \"+(void 0===e?\"undefined\":n(e))+\", while checking isHexPrefixed.\");return\"0x\"===e.slice(0,2)}(e)?e.slice(2):e}(e)),\"hex\"):Buffer.from(e);else if(\"number\"==typeof e)t=function(e){return\"0x\"+e.toString(16)}(e),e=Buffer.from(c(t.slice(2)),\"hex\");else if(null==e)e=Buffer.allocUnsafe(0);else if(s.isBN(e))e=e.toArrayLike(Buffer);else{if(!e.toArray)throw new Error(\"invalid type\");e=Buffer.from(e.toArray())}var t;return e}(e),o(\"keccak256\").update(e).digest()}function c(e){var t=e;if(\"string\"!=typeof t)throw new Error(\"while padding to even, value must be string, is currently \"+(void 0===t?\"undefined\":n(t))+\", while padToEven.\");return t.length%2&&(t=\"0\"+t),t}\"undefined\"!=typeof window&&(window.keccak256=i),e.exports=i},\"./src/server/server.js\":function(e,t,r){\"use strict\";r.r(t);var n=r(\"./build/contracts/FlightSuretyApp.json\"),o=r(\"./build/contracts/FlightSuretyData.json\"),s=r(\"./src/server/config.json\"),i=r(\"web3\"),c=r.n(i),f=r(\"express\"),u=r.n(f),a=(r(\"./node_modules/keccak256/dist/index.js\"),s.localhost),l=new c.a(new c.a.providers.WebsocketProvider(a.url.replace(\"http\",\"ws\")));l.eth.defaultAccount=l.eth.accounts[0];var d=new l.eth.Contract(n.abi,a.appAddress),h=(new l.eth.Contract(o.abi,a.dataAddress),[]),g=[0,10,20,30,40,50];l.eth.getAccounts().then((function(e){for(var t=function(t){d.methods.registerOracle().send({from:e[t],value:l.utils.toWei(\"1\",\"ether\"),gas:3e6}).catch((function(e){return console.log(\"Failed to register oracle: \".concat(e))})).then((function(r){d.methods.getMyIndexes().call({from:e[t]}).then((function(r){console.log(\"Indexes: \",r);var n={address:e[t],indexes:r};h.push(n)})),console.log(\"Successfully registered oracle: \",e[t])}))},r=0;r<20;r++)t(r);for(var n=0;n<20;n++){var o=Math.floor(900*Math.random()+100).toString(),s=Math.floor(Date.now()/1e3)+o;d.methods.registerFlight(e[0],\"NS\"+o,s).call({from:e[0],gas:3e6}).catch((function(e){return console.log(\"Failed to register flight: \".concat(e))})).then((function(e){d.methods.getFlightNumbers().call().catch((function(e){return console.log(\"Failed to get flight numbers: \".concat(e))})).then((function(e){console.log(\"Flight numbers: \",e)}))}))}})),d.events.OracleRequest({fromBlock:0},(function(e,t){e&&console.log(e),console.log(\"Response submitted: \",JSON.stringify(t)),h.forEach((function(e){if(e.indexes.includes(t.index)){var r=g[Math.floor(Math.random()*g.length)];console.log(\"Random status code: \",r),d.methods.submitOracleResponse(t.index,t.airline,t.flight,t.timestamp,r).send({from:e.address,gas:3e6})}}))}));var m=u()();m.get(\"/api\",(function(e,t){t.send({message:\"An API for use with your Dapp!\"})})),t.default=m},\"bn.js\":function(e,t){e.exports=require(\"bn.js\")},keccak:function(e,t){e.exports=require(\"keccak\")}};","extractedComments":[]}